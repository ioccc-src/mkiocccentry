.\" section 8 man page for jnum_chk
.\"
.\" This man page was first written by Cody Boone Ferguson for the IOCCC
.\" in 2022.
.\"
.\" Humour impairment is not virtue nor is it a vice, it's just plain
.\" wrong: almost as wrong as JSON spec misfeatures and C++ obfuscation! :-)
.\"
.\" "Share and Enjoy!"
.\"     --  Sirius Cybernetics Corporation Complaints Division, JSON spec department. :-)
.\"
.TH jnum_chk 8 "22 October 2022" "jnum_chk" "IOCCC tools"
.SH NAME
jnum_chk \- tool to check JSON number string conversions
.SH SYNOPSIS
\fBjnum_chk\fP [\-h] [\-v level] [\-J level] [\-V] [\-q] [\-S]
.SH DESCRIPTION
\fBjnum_chk\fP verifies that the JSON number string conversions work correctly, using the data in \fIjnum_test.c\fP which is automatically generated by the \fBjnum_gen(8)\fP tool.
By default only 8, 16, 32, 64 bit and max size signed and unsigned integer types are checked.
Floating point, double floating point and long double floating point are also checked but only to 1 part in 4.1943e+06 (\fBMATCH_PRECISION\fP).
Thus floating point conversions do not have to match fully in order to succeed when strict mode is disabled (the default).
.SH OPTIONS
.TP
\fB\-h\fP
Show help and exit.
.TP
\fB\-v \fIlevel\fP\fP
Set verbosity level to level (def: 0).
.TP
\fB\-V\fP
Print version and exit.
.TP
\fB\-J \fIlevel\fP\fP
Set JSON verbosity level to level (def: 0).
.TP
\fB\-q\fP
Set quiet mode.
This will be passed to the JSON parser.
.PP
\fB\-S\fP
Set strict mode.
.SH EXIT STATUS
.TP
0
all is OK
.TQ
1
Without \-S given and JSON number conversion test suite failed
.TQ
2
\-S given and JSON number conversion test suite failed
.TQ
3
\-h and help string printed or \-V and version string printed
.TQ
4
command line error
.TQ
>=5
internal error
.SH NOTES
.PP
The JSON parser \fBjparse\fP was co\-developed by Cody Boone Ferguson and Landon Curt Noll (one of the IOCCC Judges) in support for IOCCCMOCK, IOCCC28 and beyond.
.PP
The strict mode will enable all tests and force the floating point checks to match fully.
Specifically, if strict mode is disabled (the default) and the two numbers do not match but the difference is <= \fB1.0/MATCH_PRECISION\fP all is OK.
Otherwise there is an issue.
The strict mode option \fB\-S\fP is for informational purposes only.
If it fails on your system this is okay: the mkiocccentry repo does not need \fB\-S\fP to pass in order to be able to create a valid IOCCC entry compressed tarball.
.SH BUGS
If you have a problem with the tool (not JSON itself! :\-) ) you can report it at the GitHub issues page.
It can be found at
.br
\fI\<https://github.com/ioccc\-src/mkiocccentry/issues\>\fP.
.SH SEE ALSO
\fBjparse(1)\fP, \fBjnum_gen(8)\fP.
