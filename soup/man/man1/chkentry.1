.\" section 1 man page for chkentry
.\"
.\" This man page was first written by Cody Boone Ferguson for the IOCCC
.\" in 2022.
.\"
.\" Humour impairment is not virtue nor is it a vice, it's just plain
.\" wrong: almost as wrong as JSON spec mis-features and C++ obfuscation! :-)
.\"
.\" "Share and Enjoy!"
.\"     --  Sirius Cybernetics Corporation Complaints Division, JSON spec department. :-)
.\"
.TH chkentry 1 "29 October 2025" "chkentry" "IOCCC tools"
.SH NAME
.B chkentry
\- check an IOCCC entry directory
.SH SYNOPSIS
.B chkentry
.RB [\| \-h \|]
.RB [\| \-v
.IR level \|]
.RB [\| \-J
.IR level \|]
.RB [\| \-V \|]
.RB [\| \-q \|]
.RB [\| \-b \|]
.RB [\| \-I
.IR path \|] \ ...
.RB [\| \-P \|]
.RB [\| \-s \|]
.RB [\| \-S \|]
.RB [\| \-w \|]
.I dir
.SH DESCRIPTION
.PP
.BR chkentry (1)
runs a number of validation checks on
.B dir
which is either a IOCCC submission
.I topdir
directory, or winning IOCCC entry directory.
.PP
If
.I dir
is an IOCCC submission
.I topdir
directory, then
.B .auth.json
and/or
.B .info.json
files, as well as checking the permissions of files and directories (unless the
.B \-P
option is used) and, if the
.B .info.json
file is not ignored, it will compare the manifest with the files in the
.B dir
directory.
.PP
If
.I dir
is a winning IOCCC entry directory, then the
.B \-w
option, must be given.
Some files must exist whereas others may not exist, depending on the
.B \-w
option.
.PP
In either case, even if the manifest is being ignored, it will verify that the files in the directories are valid permissions (again, unless it's an ignored
.BR \-I path
or the
.B \-P
option is used), whether specific files are missing (unless it was ignored) and if specific files in the directory are not,
by name, allowed (unless it was ignored).
It will also verify that the filenames are sane, relative paths, in the context of the IOCCC rules,
at least when not in winning entry mode and if not ignored.
.PP
As a sanity check, the
.BR mkiocccentry (1)
program executes
.BR chkentry\  \-S
after forming the
.B .auth.json
and
.BR .info.json ,
in order to test that everything is in order.
If
.BR mkiocccentry (1)
sees a 0 exit status, then all is well.
For a non\-zero exit code, the tool aborts because any problems detected by
.BR chkentry (1)
based on what
.BR mkiocccentry (1)
did indicates there is a serious mismatch between what
.BR mkiocccentry (1)
is doing and what
.BR chkentry (1)
expects.
.PP
.SH OPTIONS
.TP
.B \-h
Print help and exit.
.TP
.BI \-v\  level
Set verbosity level to
.I level
(def: 0).
.TP
.BI \-J\  level
Set JSON parser verbosity to
.I level
(def: 0).
.TP
.B \-V
Print version and exit.
.TP
.B \-q
Set quiet mode.
Silences msg(), warn(), warnp() if verbosity level is 0.
.TP
.BI \-b
This is the option that goes
.BR BING !!!
.TP
.BI \-I\  path
Ignore
.I path
if found.
If
.I path
is a sub-directory under
.BR dir ,
do not process anything below that directory.
.sp
The of multiple
.BI \-I\  path
are allowed on the command line.
.sp
Internally each
.I path
is canonicalized by a call to
.BR canon_path (3)
such that any path whose canonicalized form matches
.I path
will also be ignored.
.sp
Ignoring a required path does
.B NOT
cause the requirement for that path to be ignored.
For example, the path
.B prog.c
is required, so while
.BI \-I\  prog.c
will prevent the processing of
.BR prog.c ,
the command will fail because
the required file will be considered "missing".
.sp
This option is for the use by the IOCCC judges only.
The use of this option by someone other than an IOCCC judge might result in the integer
.B 4
exiting your real number line: thus potentially causing general confusion amongst multiples of that integer
as to if they are prime or not. :\-)
.sp
This option conflicts with
.BR \-S .
.TP
.BI \-P
Ignore permissions of files and directories.
Ignore IOCCC limits for the maximum lengths of path, the maximum length of path elements,
and to ignore the maximum directory depth on paths.
.sp
This option is for the use by the IOCCC judges only.
The use of this option by someone other than an IOCCC judge might cause the
.B c
key in your keyboard to go on an extended vacation. :\-)
.sp
This option conflicts with
.BR \-S .
.TP
.BI \-s
Enter special mode.
.sp
This option is for the use by the IOCCC judges only.
The use of this option by someone other than an IOCCC judge might cause your computer to long for the use of
an 8-inch floppy disk. :\-)
.sp
This option conflicts with
.B \-S
and
.BR \-w .
.TP
.BI \-S
Submission mode.
This is used by
.BR chksubmit (1).
.TP
.B \-w
Perform winning entry tests instead of submission tests.
.sp
This option is for the use by the IOCCC judges only.
The use of this option by someone other than an IOCCC judge might cause the IP address,
.BR 127.0.0.1 ,
to wish it was not associated with your computer on afternoons of days of the month
that are a prime number. :\-)
.sp
This option conflicts with
.B \-S
and
.BR \-s .
.PP
If neither
.BR \-S ,
nor
.BR \-s ,
nor
.B \-w
are used, then
.B \-S
will be assumed.
.PP
The
.BR chksubmit (1)
tool calls this tool with the
.B \-S
option in order to perform important validation checks on a submission.
.SH EXIT STATUS
.TP
0
all OK
.TQ
1
some check failed, invalid JSON, semantic test failure, or other test failure
.TQ
2
.B \-h
and help string printed or
.B \-V
and version string printed
.TQ
3
command line error
.TQ
>=10
internal error
.SH NOTES
.PP
.BR chkentry (1)
is primarily used by other tools (not humans) but you may wish to test your submission directory manually if you're trying something clever.
It would be a good idea to note why you think it's clever.
.PP
Note that if you are testing that your submission directory is valid, you should
.B NOT
use options that are intended for IOCCC judges.
.SH BUGS
.PP
More than 0 humans work on it! :)
.sp
While the humans maintaining this code use a test suite to validate this code,
and while no so-called "AI tool" contributed to this tool's codebase,
this tool's test suite was written by humans with the best of intentions.
.sp
The IOCCC uses the term
.B entry
to refer to a submission that won the IOCCC whereas the term
.B submission
is used to refer to something given to the IOCCC judges for consideration when the IOCCC is open.
Nevertheless, this tool is able to perform checks in a submission when the
.B \-S
option is used.
.PP
Astute proof readers might find circumstances where variables, comments, error messages and prompt strings use
.B entry
instead of
.BR submission .
You are welcome to submit pull requests to:
correct such oversights in variables,
comments, error messages and prompt strings:
.sp
.RS 4
.ft B
https://github.com/ioccc-src/mkiocccentry/pulls
.ft R
.RE
.sp
Note, however, that there are many cases where the words
.B entry
and
.B entries
are actually correct: they would only be incorrect if they refer to an IOCCC submission that has not won.
In other words if it refers to submissions won then it should be
.B entry
or
.BR entries .
.sp
Using the
.B \-w
option on IOCCC winners before 2014 will fail because prior to 2014 the winning source file was
.B NOT
named
.BR prog.c ,
.B NOR
was the original source file named
.BR prog.orig.c .
.sp
After reading source code of a certain function called by
.BR chkentry (1),
one may become
.BR doubly\ dotty .\ :\-)
.PP
Some people might find that the cautions in this man page,
especially those involving the use of certain command line options by non-IOCCC judges,
to be a tad bit silly. :\-)
.PP
While of this tool does not guarantee that your submission will win the IOCCC,
submitting something that fails to pass the important validation checks
.B will\ guarantee
that your submission will be
.BR rejected .
.PP
If you have an issue with the tool you can open an issue at:
.sp
.RS 4
.ft B
https://github.com/ioccc-src/mkiocccentry/pulls
.ft R
.RE
.SH EXAMPLES
.PP
Run the tool on an IOCCC submission located in the directory
.IR ./test_ioccc/workdir/test\-1 :
.sp
.RS 4
.ft B
chkentry ./test_ioccc/workdir/test\-1
.ft R
.RE
.SH SEE ALSO
.PP
.BR chksubmit_test (8),
.BR mkiocccentry (1),
.BR cpath (1),
.BR canon_path (3),
.BR chksubmit (1),
.BR jparse (1)
