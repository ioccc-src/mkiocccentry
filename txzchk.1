.TH txzchk 1 "04 April 2022" "txzchk" "IOCCC tools"
.SH NAME
txzchk \- sanity checker tool used on IOCCC compressed tarballs
.SH SYNOPSIS
\fBtxzchk [\-h] [\-v level] [\-q] [\-V] [\-t tar] [\-F fnamchk] [\-T] [\-E ext] txzpath
.SH DESCRIPTION
\fBtxzchk\fP runs a series of sanity tests on IOCCC compressed tarballs.
It is invoked by \fBmkiocccentry(1)\fP after the tarball is formed, reporting any issues found and exiting the program accordingly; if \fBtxzchk\fP does not return 0 \fBmkiocccentry\fP will exit with an error.
.PP
The program runs \fBtar \-tJvf\fP on the \fItxzpath\fP to list (it does \fBNOT\fP extract) and parses the output of the command, performing a variety of tests on the tarball.
\fBtxzchk\fP runs the IOCCC tool \fBfnamchk(1)\fP on the file, verifying that the tarball is properly named.
.PP
As an important part of the judging process, The Judges will directly execute this tool on every entry's tarball.
.SH OPTIONS
.PP
\fB\-h\fP
Show help and exit.
.PP
\fB\-v\fP
Set verbosity level.
.PP
\fB\-q\fP
Suppresses some of the output.
Warnings, errors and the output of the \fBtar\fP command are still shown.
.PP
\fB\-V\fP
Show version and exit.
.PP
\fB\-t\fP
Specify path to \fBtar\fP that accepts the \fB\-J\fP option.
\fBtxzchk\fP checks \fI/usr/bin/tar\fP and \fI/bin/tar\fP if this option is not specified.
.PP
\fB\-F\fP
Specify path to the IOCCC \fBfnamchk(1)\fP tool.
If this option is not specified the program looks under the current working directory and \fI/usr/local/bin\fP.
.PP
\fB\-T\fP
Assume txzpath is a text file; use \fBfopen(3)\fP and \fBfclose(3)\fP instead of \fBpopen(3)\fP and \fBpclose(3)\fP and don't require \fBtar\fP program.
.PP
\fB\-E\fP
Change extension for \fBfnamchk(1)\fP to validate (don't include the dot).
This is used in conjunction with \fb\-T\fP above for \fBTESTING\fP purposes only!
.SH EXIT STATUS
.PP
An exit code of 0 indicates there were no issues found in the tarball.
.PP
An exit code of 1 indicates that the tarball was successfully parsed and there was at least one issue found in the tarball.
.PP
An exit code of 2 indicates that the usage string was printed either because \fB\-h\fP was specified or an invalid command line.
.PP
Any value > 2 indicates an internal error or an unknown tar listing format.
.SH FILES
\fItxzchk.c\fP
.RS
Source code of the \fBtxzchk\fP tool.
.RE
\fItxzchk.h\fP
.RS
Header file for the \fBtxzchk\fP tool.
.RE
\fIlimit_ioccc.h\fP
.RS
Header file with limits related to the IOCCC.
.RE
.SH BUGS
.PP
Cody Boone Ferguson wrote it! :)
.PP
On a more serious note, if you have an issue with the tool you can report it at \fI\<https://github.com/ioccc-src/mkiocccentry/issues\>\fP.
.SH EXAMPLES
.PP
.nf
Run the program on the tarball \fIentry.test-1.1644094311.txz\fP:

.RS
\fB
 ./txzchk entry.test-1.1644094311.txz\fP
.fi
.RE
.PP
.nf
Run the program on the tarball \fIentry.test-1.1644094311.txz\fP, specifying an alternate path to \fBtar\fP and \fBfnamchk\fP:

.RS
\fB
 ./txzchk -t /path/to/some/tar -F ./filenamechk entry.test-1.1644094311.txz\fP
.fi
.RE
.PP
.nf
Run the program on the file \fIentry.test-1.1644094311.txt\fP, specifying that it's a text file (which means \fB\-T\fP and \fB-E\fP have to be used):

.RS
\fB
 ./txzchk -T -E txt entry.test-1.1644094311.txt\fP
.fi
.RE
.SH SEE ALSO
\fBfnamchk(1)\fP, \fBmkiocccentry(1)\fP, \fbtar(1)\fP.
.SH AUTHOR
Cody Boone Ferguson.
